<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
          "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>
  <title>memory-space</title>
  <style>@import url(style.css);</style>
</head>

<body class="jdocu_main">
<script type="text/javascript">
parent.frames['toc'].d.openTo(1026, true);
</script>
<a name="label7795"></a><p class="jdocu_navbarp"><span class="jdocu_navbar">VIRTUTECH CONFIDENTIAL&nbsp;&nbsp;&nbsp;&nbsp;<a class="jdocu" href="topic163.html">Previous</a> - <a class="jdocu" href="topic15.html">Up</a> - <a class="jdocu" href="topic165.html">Next</a></span></p>
<h3 class="jdocu">memory-space</h3 class="jdocu">


<a name="label7796"></a><dl class="jdocu_di">


<dt class="jdocu_di"><b>Provided by</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic14.html#label2886">Simics Core</a></dd>


<dt class="jdocu_di"><b>Class Hierarchy</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic48.html#label4590">conf-object</a> &#8594; <a class="jdocu" href="topic150.html#label7612">log-object</a> &#8594; <b>memory-space</b></dd>


<dt class="jdocu_di"><b>Interfaces Implemented</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic508.html#label17766">log_object</a>, <a class="jdocu" href="topic509.html#label17780">map_demap</a>, <a class="jdocu" href="topic491.html#label17703">breakpoint</a>, <a class="jdocu" href="topic541.html#label17994">translate</a>, <a class="jdocu" href="topic510.html#label17782">memory_space</a></dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">


Instances of the <b>memory-space</b> class provide linear address spaces into which devices and memory can be mapped.

</dd>

</dl>
<a name="label7797"></a><h4 class="jdocu">Attributes</h4 class="jdocu">


<dl class="jdocu_di">


<dt class="jdocu_di"><b>Attributes inherited from class <a class="jdocu" href="topic48.html#label4590">conf-object</a></b></dt><dd class="jdocu_di">
<i><a class="jdocu" href="topic48.html#label4593">attributes</a></i>, <i><a class="jdocu" href="topic48.html#label4594">classname</a></i>, <i><a class="jdocu" href="topic48.html#label4595">component</a></i>, <i><a class="jdocu" href="topic48.html#label4596">iface</a></i>, <i><a class="jdocu" href="topic48.html#label4597">name</a></i>, <i><a class="jdocu" href="topic48.html#label4598">object_id</a></i>, <i><a class="jdocu" href="topic48.html#label4599">queue</a></i></dd>


<dt class="jdocu_di"><b>Attributes inherited from class <a class="jdocu" href="topic150.html#label7612">log-object</a></b></dt><dd class="jdocu_di">
<i><a class="jdocu" href="topic150.html#label7615">access_count</a></i>, <i><a class="jdocu" href="topic150.html#label7616">log_buffer</a></i>, <i><a class="jdocu" href="topic150.html#label7617">log_buffer_last</a></i>, <i><a class="jdocu" href="topic150.html#label7618">log_buffer_size</a></i>, <i><a class="jdocu" href="topic150.html#label7619">log_group_mask</a></i>, <i><a class="jdocu" href="topic150.html#label7620">log_groups</a></i>, <i><a class="jdocu" href="topic150.html#label7621">log_level</a></i>, <i><a class="jdocu" href="topic150.html#label7622">log_type_mask</a></i></dd>


<dt class="jdocu_di"><b>Attribute List</b></dt><dd class="jdocu_di">
<dl><dt><b><i>breakpoints</i></b></dt><a name="label7798"></a><dd><b>Session</b> attribute; <b>read/write</b> access; type: <b>[[i+]*]</b>; <b>integer</b> indexed;  indexed type: <b>[i*]</b>.
<p>
((<i>id</i>, <i>start</i>, <i>stop</i>)*) Tells which breakpoints (identified by their <i>id</i>) are set for the space object. <i>start</i> and <i>stop</i> specifies the interval for the breakpoint.</dd></dl>
<dl><dt><b><i>default_target</i></b></dt><a name="label7799"></a><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <b>[oiio|n]|n</b>.
<p>
(<i>object</i>, <i>function</i>, <i>offset</i>, <i>target</i>). An access not targeting any object in the map attribute will be forwarded to the default target. <i>target</i> should be non-nil if and only if <i>object</i> is a translation object. </dd></dl>
<dl><dt><b><i>map</i></b></dt><a name="label7800"></a><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <b>[[ioiii]|[ioiiio|n]|[ioiiio|ni]|[ioiiio|nii]|[ioiiio|niii]*]</b>.
<p>
((<i>base</i>, <i>object</i>, <i>function</i>, <i>offset</i>, <i>length</i>, <i>target</i>, <i>priority</i>, <i>align-size</i>, <i>byte-swap</i>)*). Maps zero or more objects in the memory space. <i>object</i> must implement one of the <tt>translate</tt>, <tt>bridge</tt>, <tt>ram</tt>, <tt>io_memory</tt>, <tt>port_space</tt>,or <tt>rom</tt> interfaces, searched for in that order. (Some of these interfaces are Simics internal and can not be implemented by user-defined classes).<br>If <i>object</i> implements the <tt>translate</tt> or <tt>bridge</tt> interface, then the <i>target</i> field must be set to an object, which in turn must implement either the <tt>memory_space</tt>, <tt>ram</tt> or <tt>rom</tt> interface, <i>target</i> should be NIL otherwise.<br><i>object</i> is mapped in the address space from <i>base</i> to <i>base</i> + <i>length</i> &minus; 1 (inclusive). Both <i>function</i> and <i>offset</i> are handed on to the mapped <i>object</i> through the appropriate interface. The function number, that is device specific, provides a way for devices with multiple mappings to figure out which mapping that is accessed. The <i>priority</i> (0 &#8211; 255) is used when multiple mappings exist on the same address. The mapping with the lowest number has the highest priority.<br>If the map target does not support large accesses, then <i>align-size</i> can be set to the maximum allowed size. Accesses spanning align boundaries will be split into several smaller transactions. By default, the align size is set to 4 for port space devices, 8 for other devices and 8192 for memory. Mappings with an <i>align-size</i> of 2, 4, and 8 may set the <i>byte-swap</i> field to 1. This can be used to model bridges that perform byte swapping on a specific bus width. It is also possible to set <i>byte-swap</i> to 3 to swap all bytes in the transaction based on the access size. The bus and transaction byte-swap variants can be combined by setting a value of 2. Consider a mapping with a 4-byte align-size and memory at address 0 that contains the bytes: 0x00 0x01 0x02 0x03. A 2-byte big-endian read access at address 0 will give the following values as results. No swap: 0x0001, bus swap: 0x0302, bus and transaction swap: 0x0203 and transaction swap: 0x0100</dd></dl>
<dl><dt><b><i>memory</i></b></dt><a name="label7801"></a><dd><b>Pseudo</b> attribute; <b>read/write</b> access; ; <b>integer</b> or <b>list</b> indexed;  indexed type: <b>Data</b>.
<p>
Read from or write to the space. Data is read without side effects (with the inquiry bit set), while writes are allowed to trigger side effects (including actually writing the data).</dd></dl>
<dl><dt><b><i>snoop_device</i></b></dt><a name="label7802"></a><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <b>Object or Nil</b>.
<p>
The snoop_device is similar to a timing-model, but called after a memory operation is complete. The object has to implement the "snoop_memory" interface, but the returned stall time is ignored.</dd></dl>
<dl><dt><b><i>timing_model</i></b></dt><a name="label7803"></a><dd><b>Optional</b> attribute; <b>read/write</b> access; type: <b>Object or Nil</b>.
<p>
The timing_model is called when a memory operation reaches the memory-space, before it is performed. The model has to implement the "timing_model" interface.</dd></dl>
</dd>

</dl>

<a name="label7804"></a><h4 class="jdocu">Command List</h4 class="jdocu">


<dl class="jdocu_di">


<dt class="jdocu_di"><b>Commands defined by interface <a class="jdocu" href="topic508.html#label17766">log_object</a></b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic508.html#label17770">log</a>, <a class="jdocu" href="topic508.html#label17772">log-group</a>, <a class="jdocu" href="topic508.html#label17774">log-level</a>, <a class="jdocu" href="topic508.html#label17776">log-size</a>, <a class="jdocu" href="topic508.html#label17778">log-type</a></dd>


<dt class="jdocu_di"><b>Commands defined by interface <a class="jdocu" href="topic491.html#label17703">breakpoint</a></b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic491.html#label17715">break</a>, <a class="jdocu" href="topic491.html#label17717">tbreak</a></dd>


<dt class="jdocu_di"><b>Commands</b></dt><dd class="jdocu_di">
<table>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7806">add-map</a></b></td><td class="jdocu_noborder">map device in a memory-space</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7808">del-map</a></b></td><td class="jdocu_noborder">remove device map from a memory-space</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7810">get</a></b></td><td class="jdocu_noborder">get value of physical address</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7812">info</a></b></td><td class="jdocu_noborder">print information about the device</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7814">load-binary</a></b></td><td class="jdocu_noborder">load binary (executable) file into memory</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7816">load-file</a></b></td><td class="jdocu_noborder">load file into memory</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7818">map</a></b></td><td class="jdocu_noborder">list memory map</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7820">set</a></b></td><td class="jdocu_noborder">set physical address to specified value</td></tr>
<tr><td class="jdocu_noborder"><b><a class="jdocu" href="#label7822">x</a></b></td><td class="jdocu_noborder">examine raw memory contents</td></tr>
</table>
</dd>

</dl>

<a name="label7805"></a><h4 class="jdocu">Command Descriptions</h4 class="jdocu">




<a name="label7806"></a><a name="label7807"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.add-map</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.add-map</b> <i>device</i> <i>base</i> <i>length</i> [<i>function</i>] [<i>offset</i>] [<i>target</i>] [<i>priority</i>] [<i>align-size</i>] [<i>"swap"</i>] </dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Map <i>device</i> into a memory-space at address <i>base</i>
and with length <i>length</i>. Different mappings of the same device
may be indentified by a device specific <i>function</i> number. For
translator and bridge mappings, a <i>target</i> device should be given.
The mapping may specify an offset into the device's memory space, using the
<i>offset</i> argument. If several device mappings overlap, the
<i>priority</i> is used to select what device will receive memory
accesses. The priority is an integer between 0 and 255, where 0 is highest.
For devices that do not support large accesses, the <i>align-size</i>
governs how accesses are split before the device is accessed. A device mapping
may swap the bytes of an access based on the <i>swap</i> argument, that
should be one of <tt>none</tt>, <tt>bus</tt>, <tt>bus-trans</tt> and
<tt>trans</tt>. For a description of these, see the documentation of the
<i>map</i> attribute in the <b>memory-space</b> class.</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="#label7818">&lt;memory-space&gt;.map</a>, <a class="jdocu" href="#label7808">&lt;memory-space&gt;.del-map</a></dd>

</dl>



<a name="label7808"></a><a name="label7809"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.del-map</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.del-map</b> <i>device</i> [<i>function</i>] [<i>base</i>] </dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Remove the mapping of <i>device</i> from a memory-space. If a function
number is given by the <i>function</i> argument, then only mappings
with a matching number are removed. If an <i>address</i> is given,
only mappings with a matching address are removed. If both a
<i>function</i> and an <i>address</i> are specified, then only
mappings with a matching function number, at the specified address, are
removed.</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="#label7818">&lt;memory-space&gt;.map</a>, <a class="jdocu" href="#label7806">&lt;memory-space&gt;.add-map</a></dd>

</dl>



<a name="label7810"></a><a name="label7811"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.get</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.get</b> <i>address</i> [<i>size</i>] [-l] [-b] <br><b>get</b> <i>address</i> [<i>size</i>] [-l] [-b] </dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Get value of physical memory location. The size argument specifies how
many bytes should be read. This defaults to 4, but can be any number
of bytes between 1 and 8 (inclusive).
<p>
The <i>-l</i> and <i>-b</i> flags are used to select little-endian and
big-endian byte order, respectively.  If neither is given, the byte
order of the currently selected processor is used.
<p>
This command operates on the physical memory associated with the
current processor.</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic13.html#label2489">x</a>, <a class="jdocu" href="topic13.html#label2334">set</a>, <a class="jdocu" href="topic13.html#label2356">signed</a></dd>

</dl>



<a name="label7812"></a><a name="label7813"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.info</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.info</b></dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Print detailed information about the configuration of the device.</dd>

</dl>



<a name="label7814"></a><a name="label7815"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.load-binary</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.load-binary</b> <i>filename</i> [<i>offset</i>] [-v] [-pa] <br><b>&lt;processor&gt;.load-binary</b> <i>filename</i> [<i>offset</i>] [-v] [-pa] <br><b>load-binary</b> <i>filename</i> [<i>offset</i>] [-v] [-pa] [-l] </dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Load a binary (executable) file into the given physical or virtual memory
space. The supported formats are ELF, Motorola S-Record, PE32 and PE32+.
If an offset is supplied, it will be added to the load
address taked from the file.
<p>
By default the virtual load address from the file is used, but the
physical address can be used instead by specifying the
<i>-pa</i> flag.
<p>
The <i>-v</i> flag turns on verbose mode, printing information
about the loaded file.
<p>
When used as a global command, it will use the currently selected
processor to find the memory space to load the binary into.  If the
<i>-l</i> flag is given, it will load it into the virtual
memory space, otherwise it will use the physical memory space.
<p>
When using the namespace command on a <b>processor</b> object,
it will load the binary into the virtual memory space of that
processor.
<p>
When using the namespace command on a <b>memory-space</b>
object, it will load the binary directly into that memory space.
<p>
The return value is the address of the execution
entry point. This value is typically used in a call to
<b>set-pc</b>.
<p>
<b>load-binary</b> uses Simics's Search Path and path markers (%simics%,
%script%) to find the file to load. Refer to Simics User Guide (CLI chapter)
for more information on how Simics's Search Path is used to locate files.</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic13.html#label1485">add-directory</a></dd>

</dl>



<a name="label7816"></a><a name="label7817"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.load-file</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.load-file</b> <i>filename</i> [<i>offset</i>] <br><b>load-file</b> <i>filename</i> [<i>offset</i>] </dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Loads a file with name <i>filename</i> into the memory space
(defaulting to the current frontend processor's physical memory
space), starting at physical address <i>offset</i>. Default offset is
0.
<p>
<b>load-file</b> uses Simics's Search Path and path markers (%simics%,
%script%) to find the file to load. Refer to Simics User Guide (CLI chapter)
for more information on how Simics's Search Path is used to locate files.</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic13.html#label1485">add-directory</a></dd>

</dl>



<a name="label7818"></a><a name="label7819"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.map</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.map</b></dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Prints the memory map of the memory space object, one line per entry
in the map attribute of the memory space. The <em>base</em> column is
the starting address of the map. The <em>object</em> column contains
the object mapped at that address. <em>fn</em> is the function number
and <em>offs</em> is the offset for the object. <em>length</em> is the
number of bytes mapped.</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="#label7806">&lt;memory-space&gt;.add-map</a>, <a class="jdocu" href="#label7808">&lt;memory-space&gt;.del-map</a></dd>

</dl>



<a name="label7820"></a><a name="label7821"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.set</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.set</b> <i>address</i> <i>value</i> [<i>size</i>] [-l] [-b] <br><b>set</b> <i>address</i> <i>value</i> [<i>size</i>] [-l] [-b] </dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Set the <i>size</i> bytes of physical memory at location
<i>address</i> to <i>value</i>. The default <i>size</i> is 4 bytes,
but can be anywhere between 1 and 8 (inclusive).
<p>
If <i>value</i> is larger than the specified size, behavior is undefined.
<p>
The <i>-l</i> and <i>-b</i> flags are used to select little-endian and
big-endian byte order, respectively.  If neither is given, the byte
order of the currently selected processor is used.
<p>
The non-namespace version of this command operates on the physical memory
associated with the current processor.</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic13.html#label1894">get</a>, <a class="jdocu" href="topic13.html#label2489">x</a>, <a class="jdocu" href="topic13.html#label2249">pselect</a></dd>

</dl>



<a name="label7822"></a><a name="label7823"></a><dl class="jdocu_di">

<dt class="jdocu_di_name">
<b>&lt;memory-space&gt;.x</b></dt>

<dt class="jdocu_di_synopsis">Synopsis</dt><dd class="jdocu_di_synopsis">
<b>&lt;memory-space&gt;.x</b> <i>address</i> [<i>size</i>] <br><b>&lt;processor&gt;.x</b> <i>address</i> [<i>size</i>] <br><b>x</b> [<i>cpu-name</i>] <i>address</i> [<i>size</i>] </dd>

<dt class="jdocu_di_description">Description</dt><dd class="jdocu_di_description">
Display the contents of a memory space starting at <i>address</i>. Either
the memory space is explicitly specified as in
<b>&lt;memory-space&gt;.x</b> or the CPU connected to the memory space can be
specified; e.g., <b>&lt;processor&gt;.x</b>. By itself, <b>x</b> operates
on the memory connected to the current frontend processor.
<p>
If the memory is accessed via a CPU, the type of <i>address</i> is
specified by a prefix. For physical addresses use
<b>p:<i>address</i></b>; for virtual addresses,
<b>v:<i>address</i></b> on non-x86 targets. On x86, use
<b><i>segment-register</i>:<i>offset</i></b> or
<b>l:<i>address</i></b> for x86 linear addresses.
<p>
If no prefix is given it will be interpreted as a virtual address. On x86 the
default is <b>ds:<i>address</i></b> (data segment addressing).
<p>
The <i>size</i> argument specifies the number of bytes to examine. When
examining virtual memory, only addresses which can be found in the TLB or
hardware page tables (if any) are shown. Unmapped addresses are shown
as "<tt>--</tt>", undefined physical addresses as "<tt>**</tt>".</dd>


<dt class="jdocu_di"><b>See Also</b></dt><dd class="jdocu_di">
<a class="jdocu" href="topic13.html#label1850">disassemble</a>, <a class="jdocu" href="topic13.html#label1894">get</a>, <a class="jdocu" href="topic13.html#label2334">set</a></dd>

</dl>


<p class="jdocu_navbarp"><span class="jdocu_navbar">VIRTUTECH CONFIDENTIAL&nbsp;&nbsp;&nbsp;&nbsp;<a class="jdocu" href="topic163.html">Previous</a> - <a class="jdocu" href="topic15.html">Up</a> - <a class="jdocu" href="topic165.html">Next</a></span></p>
</body>
</html>
